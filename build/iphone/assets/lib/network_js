function showMessage(e){Ti.UI.createAlertDialog({message:e,ok:L("ok"),title:L("alert_title")}).show()}function checkInternetConnection(){return Ti.Network.online}Ti.App.Properties.setString("hostname","expomobile.com.mx");var hostname="expomobile.com.mx",indicatorWindow=require("ui/common/CreateIndicatorWindow"),indicator=indicatorWindow.CreateIndicatorWindow();exports.SERVICES={CONFERENCES_DAYS:"/mobile_services/index_conference_days",CONFERENCES:"/mobile_services/index_conferences?day=",DIARIES_DAYS:"/mobile_services/index_diary_days",DIARIES:"/mobile_services/index_diaries?day=",ACTIVITIES_DAYS:"/mobile_services/index_activity_days",ACTIVITIES:"/mobile_services/index_activities?day=",WORKSHOPS_DAYS:"/mobile_services/index_workshop_days",WORKSHOPS:"/mobile_services/index_workshops?day="},exports.getRegistro=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="";"en"==L("language")&&(t="&language=en");var i="http://"+hostname+"/mobile_services/get_attendee_id?attendee_id="+e+t;n.open("GET",i),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),"no"==e.sent&&showMessage(e.msg),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getNip=function(e,o,n){if(checkInternetConnection()){var t=Ti.UI.createActivityIndicator({color:"white",font:{fontFamily:"Helvetica Neue",fontSize:20,fontWeight:"bold"},message:"  "+L("loading"),style:style,height:"100%",width:Ti.UI.SIZE,backgroundColor:"#000",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,center:{y:"50%"},fullscreen:!1}),i=Ti.UI.createWindow({title:"ventana",backgroundColor:"#000",opacity:"0.8",width:"100%",height:"100%"});i.add(t),t.show(),i.open(),i.addEventListener("blur",function(){i.close()});var r=Ti.Network.createHTTPClient(),s="http://"+hostname+"/mobile_services/get_attendee_nip?attendee_id="+e+"&nip="+o;r.open("GET",s),r.setRequestHeader("Content-Type","application/json","Accept","application/json"),r.send(),r.setTimeout(15e3),r.onerror=function(){i.close(),showMessage(L("server_error")),n(!1)},r.onload=function(){var e=JSON.parse(this.responseText);i.close(),"no"==e.access&&showMessage(e.msg),n(e)}}else showMessage(L("connectionerror")),n(!1)},exports.getExhibitors=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="";e&&(t="?with_offerts=1");var i="http://"+hostname+"/mobile_services/index_exhibitors"+t;n.open("GET",i),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(2e4),n.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),o(!1)},n.onload=function(){indicator.closeIndicator();var e=JSON.parse(this.responseText),n=Ti.Database.open("anadicDB");n.execute("CREATE TABLE IF NOT EXISTS exhibitors(id INTEGER, name TEXT, mobile_logo_url TEXT, social_reason TEXT);"),n.execute("DELETE FROM exhibitors;");for(var t=0;e.length>t;t++)n.execute("INSERT INTO exhibitors VALUES ("+e[t].id+",'"+e[t].name+"','"+e[t].mobile_logo_url+"','"+e[t].social_reason+"');");n.close(),indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getOffers=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/index_offerts?exhibitor_id="+e;n.open("GET",t),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getAllOffers=function(e){if(checkInternetConnection()){indicator.openIndicator();var o=Ti.Network.createHTTPClient(),n="http://"+hostname+"/mobile_services/index_offerts";o.open("GET",n),o.setRequestHeader("Content-Type","application/json","Accept","application/json"),o.send(),o.setTimeout(15e3),o.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),e(!1)},o.onload=function(){var o=JSON.parse(this.responseText);indicator.closeIndicator(),e(o)}}else showMessage(L("connectionerror")),e(!1)},exports.getOffersDetail=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/show_offert?offert_id="+e;n.open("GET",t),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getSponsors=function(e){if(checkInternetConnection()){var o=Ti.UI.createActivityIndicator({color:"white",font:{fontFamily:"Helvetica Neue",fontSize:20,fontWeight:"bold"},message:"  "+L("loading"),style:style,height:"100%",width:Ti.UI.SIZE,backgroundColor:"#000",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,center:{y:"50%"}}),n=Ti.UI.createWindow({title:"ventana",backgroundColor:"#000",opacity:"0.8",width:"100%",height:"100%"});n.add(o),o.show(),n.open(),n.addEventListener("blur",function(){n.close()});var t=Ti.Network.createHTTPClient(),i="http://"+hostname+"/mobile_services/index_sponsors";t.open("GET",i),t.setRequestHeader("Content-Type","application/json","Accept","application/json"),t.send(),t.setTimeout(15e3),t.onerror=function(){n.close(),showMessage(L("server_error")),e(!1)},t.onload=function(){var o=JSON.parse(this.responseText),t=Ti.Database.open("anadicDB");t.execute("CREATE TABLE IF NOT EXISTS sponsors(id INTEGER, name TEXT, email TEXT, job TEXT, phone TEXT, social_network TEXT, social_reason TEXT, mobile_logo_url TEXT);"),t.execute("DELETE FROM sponsors;");for(var i=0;o.length>i;i++)t.execute("INSERT INTO sponsors VALUES ("+o[i].id+",'"+o[i].name+"','"+o[i].email+"','"+o[i].job+"','"+o[i].phone+"','"+o[i].social_network+"','"+o[i].social_reason+"','"+o[i].mobile_logo_url+"');");t.close(),n.close(),e(o)}}else showMessage(L("connectionerror")),e(!1)},exports.getSponsorDetail=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/show_sponsor?sponsor_id="+e;n.open("GET",t),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getExhibitorDetail=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/show_exhibitor?exhibitor_id="+e;n.open("GET",t),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getFaceToFaceDays=function(e){if(checkInternetConnection()){indicator.openIndicator();var o=Ti.Network.createHTTPClient(),n="http://"+hostname+"/mobile_services/index_face_to_face_days";o.open("GET",n),o.setRequestHeader("Content-Type","application/json","Accept","application/json"),o.send(),o.setTimeout(15e3),o.onerror=function(){showMessage(L("server_error")),indicator.closeIndicator(),e(!1)},o.onload=function(){var o=JSON.parse(this.responseText);indicator.closeIndicator(),e(o)}}else showMessage(L("connectionerror")),e(!1)},exports.getFacetoFace=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/index_face_to_faces?day="+e;n.open("GET",t),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){showMessage(L("server_error")),indicator.closeIndicator(),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getFaceToFaceDetail=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/show_face_to_face?face_to_face_id="+e;n.open("GET",t),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){showMessage(L("server_error")),indicator.closeIndicator(),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getExpositionDays=function(e){if(checkInternetConnection()){indicator.openIndicator();var o=Ti.Network.createHTTPClient(),n="http://"+hostname+"/mobile_services/index_exposition_days";o.open("GET",n),o.setRequestHeader("Content-Type","application/json","Accept","application/json"),o.send(),o.setTimeout(15e3),o.onerror=function(){showMessage(L("server_error")),indicator.closeIndicator(),e(!1)},o.onload=function(){var o=JSON.parse(this.responseText);indicator.closeIndicator(),e(o)}}else showMessage(L("connectionerror")),e(!1)},exports.getExpositions=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/index_expositions?day="+e;n.open("GET",t),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){showMessage(L("server_error")),indicator.closeIndicator(),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.getAllExpositions=function(e){if(checkInternetConnection()){indicator.openIndicator();var o=Ti.Network.createHTTPClient(),n="http://"+hostname+"/mobile_services/index_expositions_names";o.open("GET",n),o.setRequestHeader("Content-Type","application/json","Accept","application/json"),o.send(),o.setTimeout(15e3),o.onerror=function(){showMessage(L("server_error")),indicator.closeIndicator(),e(!1)},o.onload=function(){var o=JSON.parse(this.responseText);indicator.closeIndicator(),e(o)}}else showMessage(L("connectionerror")),e(!1)},exports.postVisitWorkshop=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/register_visit_to_workshop?key="+e;n.open("GET",t),n.send(),n.setTimeout(15e3),n.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.postVisitExposition=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+"/mobile_services/register_visit_to_exposition?key="+e;n.open("GET",t),n.send(),n.setTimeout(15e3),n.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)},exports.postSuggestions=function(e,o,n){if(checkInternetConnection()){indicator.openIndicator();var t=Ti.Network.createHTTPClient(),i="http://"+hostname+"/mobile_services/rate?value="+e+'&comment="'+o+'"';t.open("GET",i),t.send(),t.setTimeout(15e3),t.onerror=function(){indicator.closeIndicator(),showMessage(L("server_error")),n(!1)},t.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),n(e)}}else showMessage(L("connectionerror")),n(!1)},exports.getDataParam=function(e,o,n){this.getData(e+o,n)},exports.getData=function(e,o){if(checkInternetConnection()){indicator.openIndicator();var n=Ti.Network.createHTTPClient(),t="http://"+hostname+e;n.open("GET",t),n.setRequestHeader("Content-Type","application/json","Accept","application/json"),n.send(),n.setTimeout(15e3),n.onerror=function(){showMessage(L("server_error")),indicator.closeIndicator(),o(!1)},n.onload=function(){var e=JSON.parse(this.responseText);indicator.closeIndicator(),o(e)}}else showMessage(L("connectionerror")),o(!1)};