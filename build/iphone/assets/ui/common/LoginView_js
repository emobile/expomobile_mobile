function LoginView(){var e=require("lib/network"),t="",i=Ti.Database.open("anadicDB"),o=i.execute("SELECT name FROM users WHERE userId = 1;");o.isValidRow()?(t=o.fieldByName("name"),o.close(),("undefined"===t||"null"==t)&&(t="")):t="",i.close();var n=Ti.UI.createView({tabBarHidden:!0,backgroundColor:"black",width:"100%",layout:"vertical",height:Ti.UI.SIZE}),r=Ti.UI.createLabel({id:"labelUsuario",height:"auto",width:"90%",text:L("welcome")+" "+t+"!!!",font:{fontSize:"18dp"},color:"#798d8d",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),a=Ti.UI.createView({width:"100%",height:Ti.UI.SIZE,layout:"composite"}),c=Ti.UI.createLabel({id:"labelVersion",text:"v. "+Ti.App.version,right:"10",center:{y:"50%"},width:Ti.UI.SIZE,font:{fontWeight:"bold",fontSize:"14dp"},color:"#EEEEEE"}),s=function(){l(),a.add(imageViewBar),a.add(c),n.add(a),n.add(scrollView_1)},d=function(){scrollView_1=Ti.UI.createScrollView({id:"scrollView_1",backgroundImage:"/images/background.png",height:"100%",left:0,top:0,width:"100%",layout:"vertical"})},l=function(){d(),u(),h(),scrollView_1.add(imageViewLogo),scrollView_1.add(r),T(),scrollView_1.add(textFieldRegistro),p(),scrollView_1.add(buttonIngresar),"iphone"==Ti.Platform.osname||"ipad"==Ti.Platform.osname||scrollView_1.add(buttonSalir)},p=function(){buttonIngresar=Ti.UI.createImageView({id:"buttonIngresar",width:Ti.UI.SIZE,height:Ti.UI.SIZE,top:10}),buttonSalir=Ti.UI.createImageView({id:"buttonSalir",width:Ti.UI.SIZE,height:Ti.UI.SIZE,top:5}),"es"==L("language")?(buttonIngresar.image="/images/buttoningresar.png",buttonSalir.image="/images/buttonsalir.png"):(buttonIngresar.image="/images/buttoningresar_e.png",buttonSalir.image="/images/buttonsalir_e.png")},T=function(){textFieldRegistro=Ti.UI.createTextField({hintText:L("nip"),id:"textFieldRegistro",width:"250dp",passwordMask:!0,top:"10",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});var e=Ti.Database.open("anadicDB");e.execute("CREATE TABLE IF NOT EXISTS nip(nipId INTEGER PRIMARY KEY, nipNumber TEXT)");var t=e.execute("SELECT nipNumber FROM nip WHERE nipId = 1;"),i="";t.isValidRow()&&(i=t.fieldByName("nipNumber")),textFieldRegistro.value=i,textFieldRegistro.focus(),t.close()},h=function(){imageViewLogo=Ti.UI.createImageView({id:"imageViewLogo",image:"/images/anadic.png",height:235,top:10,width:178,verticalAlign:"center"})},u=function(){imageViewBar=Ti.UI.createView({id:"imageViewBar",backgroundColor:Ti.App.Properties.getString("viewcolor"),height:40,left:0,top:0,width:"100%"})};s(),buttonIngresar.addEventListener("click",function(){if(Ti.Media.vibrate(),""==!textFieldRegistro.value){var t=Ti.Database.open("anadicDB"),i=t.execute("SELECT id FROM users WHERE userId = 1;");e.getNip(i.fieldByName("id"),textFieldRegistro.value,function(e){if("ok"==e.access){var t=Ti.Database.open("anadicDB"),i=t.execute("SELECT nipNumber FROM nip WHERE nipId = 1;");i.isValidRow()||t.execute('INSERT INTO nip VALUES (1, "'+textFieldRegistro.value+'");'),i.close(),t.close(),textFieldRegistro.blur();var o,n=require("ui/handheld/MainWindow");new n(o).open()}}),t.close()}else Ti.UI.createAlertDialog({message:L("empty"),title:L("alert_title"),ok:L("ok")})});var I=Ti.UI.createAlertDialog({title:L("tittlealert"),message:L("closeapp"),buttonNames:[L("yes"),L("no")]});I.addEventListener("click",function(e){0==e.index&&(Ti.Media.vibrate(),"android"==Ti.Platform.osname?Ti.Android.currentActivity.finish():n.getParent().close())}),buttonSalir.addEventListener("click",function(){Ti.Media.vibrate(),I.show()});var w=!0;return textFieldRegistro.addEventListener("focus",function g(){w?(w=!1,textFieldRegistro.blur()):textFieldRegistro.removeEventListener("focus",g)}),n}module.exports=LoginView;