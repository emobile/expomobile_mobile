function ExpositoresWindow(e,i,t,a){function o(){if(c>0){if(0==i){var e=Ti.Database.open("anadicDB"),t=e.execute("SELECT mobile_logo_url FROM exhibitors WHERE name='"+l[s].exhibitor_name+"'");t.isValidRow()&&isNaN(t.fieldByName("mobile_logo_url"))&&(imageViewExpositor.image="http://"+Ti.App.Properties.getString("hostname")+t.fieldByName("mobile_logo_url")),t.close(),e.close()}else imageViewExpositor.image=a;precio=l[s].price.split("."),labelCuentaOfertas.text=s+1+" "+L("of")+" "+c,labelExpositor.text=l[s].exhibitor_name,labelDescripcion.text=l[s].description,labelUbicacion.text=l[s].location,labelPrecio.text="$"+precio[0],labelFechaInicio.text=n(l[s].start_date),labelFechaTermino.text=n(l[s].end_date)}else labelNoHayOfertas=Ti.UI.createLabel({id:"labelNoHayOfertas",height:"auto",width:"auto",text:L("nooffers"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",top:20}),scrollView.add(labelNoHayOfertas)}function n(e){var i=e.substring(0,10).split("-"),t=i[2]+"-"+i[1]+"-"+i[0];return t}var r=require("lib/network");winExpW=Ti.UI.createWindow({tabBarHidden:!0,backgroundImage:"/images/background.png",width:"100%",height:"100%",layout:"vertical",fullscreen:!1,navBarHidden:!0}),scrollView=Ti.UI.createView({id:"scrollView",backGroundColor:"transparent",height:"70%",width:"100%",layout:"vertical"}),imageViewBar=Ti.UI.createView({id:"imageViewBar",backgroundColor:Ti.App.Properties.getString("viewcolor"),height:80,left:0,top:0,width:"100%",layout:"horizontal"}),imageView=Ti.UI.createImageView({id:"imageView",image:"/images/iconofertas.png",width:60,height:60,top:7,right:3}),imageViewBar.add(imageView),labelTitulo=Ti.UI.createLabel({id:"labelTitulo",height:"auto",width:"70%",text:L("offers"),font:{fontSize:"22dp"},color:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER}),imageViewBar.add(labelTitulo),buttonClose=Ti.UI.createImageView({id:"buttonClose",image:"/images/close.png",width:30,height:30,top:25}),imageViewBar.add(buttonClose),bottomBar=Ti.UI.createView({id:"bottomBar",backgroundColor:"transparent",height:"10%",width:"100%",top:"-1px",left:0}),buttonFirst=Ti.UI.createImageView({id:"buttonFirst",image:"/images/buttonfirst.png",width:48,height:48,top:"0%",left:"10px"}),viewSlide=Ti.UI.createImageView({id:"buttonMiddle",image:"/images/swipefinger.png",width:48,height:48,center:{x:"50%",y:"50%"}}),buttonLast=Ti.UI.createImageView({id:"buttonLast",image:"/images/buttonfinal.png",width:48,height:48,top:"0%",right:"10px"});var l,d,c,s=0;return 0==i?r.getAllOffers(function(e){l=e,c=l.length,o()}):r.getOffers(i,function(e){l=e,c=l.length,o()}),d=Ti.UI.createScrollView({backgroundColor:"transparent",width:"100%",height:"100%",layout:"composite"}),labelCuentaOfertas=Ti.UI.createLabel({id:"labelCuentaOfertas",height:Ti.UI.SIZE,width:"100%",font:{fontWeight:"bold",fontSize:"18dp"},color:"#2c2c2c",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,right:"10px",top:"0px"}),labelExpositorTitulo=Ti.UI.createLabel({id:"labelExpositorTitulo",height:Ti.UI.SIZE,width:Ti.UI.SIZE,text:L("exhibitor"),top:70,left:10,font:{fontWeight:"bold",fontSize:"18dp"},color:"black"}),viewExpositor=Ti.UI.createView({id:"viewExpositor",height:Ti.UI.SIZE,width:"100%",layout:"composite",left:0,top:0}),labelExpositor=Ti.UI.createLabel({id:"labelExpositor",height:"auto",width:"auto",font:{fontSize:"20dp",fontWeight:"bold"},color:"#686868",top:70,right:10}),imageViewExpositor=Ti.UI.createImageView({id:"imageViewExpositor",image:"images/unavailable.jpg",width:Ti.UI.SIZE,height:Ti.UI.SIZE,left:"10px",top:"25px",bottom:"30px"}),line=Ti.UI.createView({width:"90%",height:1,backgroundColor:"black",anchorPoint:{x:0,y:0},top:95}),labelDescripcionTitulo=Ti.UI.createLabel({id:"labelDescripcionTitulo",height:"auto",width:"auto",text:L("description"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",left:10,top:105}),labelDescripcion=Ti.UI.createLabel({id:"labelDescripcion",height:"auto",width:"auto",font:{fontSize:"20dp",fontWeight:"bold"},color:"#686868",left:10,top:125}),labelPrecioTitulo=Ti.UI.createLabel({id:"labelPrecio",height:"auto",width:"auto",text:L("price"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",right:10,top:105}),labelPrecio=Ti.UI.createLabel({id:"labelPrecio",height:"auto",width:"auto",font:{fontWeight:"bold",fontSize:"24dp"},color:"#686868",right:10,top:125}),labelUbicacionTitulo=Ti.UI.createLabel({id:"labelUbicacionTitulo",height:"auto",width:"auto",text:L("location"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",left:10,top:165}),labelUbicacion=Ti.UI.createLabel({id:"labelUbicacion",height:"auto",width:"auto",font:{fontSize:"18dp"},color:"#686868",left:10,top:185}),labelFechaInicioTitulo=Ti.UI.createLabel({id:"labelFechaInicioTitulo",height:"auto",width:"auto",text:L("start_time"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",left:"10",top:"225"}),labelFechaInicio=Ti.UI.createLabel({id:"labelFechaInicio",height:"auto",width:"auto",font:{fontSize:"18dp"},color:"#686868",left:"20",top:"245"}),labelFechaTerminoTitulo=Ti.UI.createLabel({id:"labelFechaTerminoTitulo",height:"auto",width:"auto",text:L("end_time"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",top:"225",right:"10"}),labelFechaTermino=Ti.UI.createLabel({id:"labelFechaTermino",height:"auto",width:"auto",font:{fontSize:"18dp"},color:"#686868",right:"10",top:"245"}),viewExpositor.add(imageViewExpositor),viewExpositor.add(labelExpositor),viewExpositor.add(labelCuentaOfertas),viewExpositor.add(labelExpositorTitulo),d.add(viewExpositor),d.add(line),d.add(labelDescripcionTitulo),d.add(labelDescripcion),d.add(labelPrecioTitulo),d.add(labelPrecio),d.add(labelUbicacionTitulo),d.add(labelUbicacion),d.add(labelFechaInicioTitulo),d.add(labelFechaInicio),d.add(labelFechaTerminoTitulo),d.add(labelFechaTermino),scrollView.add(d),winExpW.add(imageViewBar),winExpW.add(scrollView),bottomBar.add(buttonFirst),bottomBar.add(viewSlide),bottomBar.add(buttonLast),winExpW.add(bottomBar),buttonFirst.addEventListener("click",function(){Ti.Media.vibrate(),s=0,o()}),buttonLast.addEventListener("click",function(){Ti.Media.vibrate(),s=c-1,o()}),scrollView.addEventListener("swipe",function(e){"left"==e.direction?c-1>s?(s++,o()):Ti.Media.vibrate():"right"==e.direction&&(s>0?(s--,o()):Ti.Media.vibrate())}),buttonClose.addEventListener("click",function(){Ti.Media.vibrate(),winExpW.close()}),winExpW.addEventListener("android:back",function(){Ti.Media.vibrate(),winExpW.close()}),winExpW}module.exports=ExpositoresWindow;