function ExpositoresWindow(e,i,t,o){function a(){Ti.Media.vibrate(),winExpW.close()}function n(){if(g>0){if(0==i){var e=Ti.Database.open("anadicDB"),t=e.execute("SELECT mobile_logo_url FROM exhibitors WHERE name='"+w[p].exhibitor_name+"'");t.isValidRow()&&isNaN(t.fieldByName("mobile_logo_url"))&&(imageViewExpositor.image="http://"+Ti.App.Properties.getString("hostname")+t.fieldByName("mobile_logo_url")),t.close(),e.close()}else imageViewExpositor.image=o;precio=w[p].price.split("."),labelCuentaOfertas.text=p+1+" "+L("of")+" "+g,labelExpositor.text=w[p].exhibitor_name,labelDescripcion.value=w[p].description,labelUbicacion.text=w[p].location,labelPrecio.text="$"+precio[0],labelFechaInicio.text=d(w[p].start_date),labelFechaTermino.text=d(w[p].end_date)}else labelNoHayOfertas=Ti.UI.createLabel({id:"labelNoHayOfertas",height:"auto",width:"auto",text:L("nooffers"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",top:20}),scrollView.add(labelNoHayOfertas)}function r(e){Ti.Media.vibrate(),p=e,n()}function d(e){var i=e.substring(0,10).split("-"),t=i[2]+"-"+i[1]+"-"+i[0];return t}var l=require("lib/network"),c=require("tools"),s=c.isiOS7Plus(),u=0;winExpW=Ti.UI.createWindow({tabBarHidden:!0,backgroundImage:"/images/background.png",width:"100%",height:"100%",layout:"composite",fullscreen:s,navBarHidden:!0}),scrollView=Ti.UI.createView({id:"scrollView",backGroundColor:"transparent",height:"70%",width:"100%",layout:"vertical"}),bottomBar=Ti.UI.createView({id:"bottomBar",backgroundColor:"transparent",height:Ti.UI.SIZE,width:"100%",bottom:"5",left:0}),buttonFirst=Ti.UI.createImageView({id:"buttonFirst",image:"/images/buttonfirst.png",width:48,height:48,top:"0%",left:"10"}),buttonPrev=Ti.UI.createImageView({id:"buttonPrev",image:"/images/previous.png",width:48,height:48,top:"0%",left:"68"}),buttonLast=Ti.UI.createImageView({id:"buttonLast",image:"/images/buttonfinal.png",width:48,height:48,top:"0%",right:"10"}),buttonNext=Ti.UI.createImageView({id:"buttonNext",image:"/images/next.png",width:48,height:48,top:"0%",right:"68"});var w,h,g,p=0;0==i?l.getAllOffers(function(e){w=e,g=w.length,n()}):l.getOffers(i,function(e){w=e,g=w.length,n()}),h=Ti.UI.createView({backgroundColor:"transparent",width:"100%",height:Ti.UI.SIZE,layout:"composite",top:200}),labelCuentaOfertas=Ti.UI.createLabel({id:"labelCuentaOfertas",height:Ti.UI.SIZE,width:"100%",font:{fontWeight:"bold",fontSize:"18dp"},color:"#2c2c2c",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,right:"10",top:"0"}),labelExpositorTitulo=Ti.UI.createLabel({id:"labelExpositorTitulo",height:Ti.UI.SIZE,width:Ti.UI.SIZE,text:L("exhibitor"),top:100,left:10,font:{fontWeight:"bold",fontSize:"18dp"},color:"black"}),viewExpositor=Ti.UI.createView({id:"viewExpositor",height:Ti.UI.SIZE,width:"100%",layout:"composite",left:0,top:80}),labelExpositor=Ti.UI.createLabel({id:"labelExpositor",height:"auto",width:"auto",font:{fontSize:"20dp",fontWeight:"bold"},color:"#686868",top:100,right:10}),imageViewExpositor=Ti.UI.createImageView({id:"imageViewExpositor",image:"images/unavailable.jpg",width:Ti.UI.SIZE,height:Ti.UI.SIZE,left:"10",top:"25",bottom:"30"}),line=Ti.UI.createView({width:"100%",height:1,backgroundColor:"black",anchorPoint:{x:0,y:0},top:5,left:10,right:10}),labelDescripcionTitulo=Ti.UI.createLabel({id:"labelDescripcionTitulo",height:"auto",width:"auto",text:L("description"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",left:10,top:u+5}),labelDescripcion=Ti.UI.createTextArea({id:"labelDescripcion",height:Ti.UI.SIZE,width:Ti.UI.SIZE,font:{fontSize:"20dp",fontWeight:"bold"},color:"#686868",width:"65%",height:140,left:10,top:u+30,editable:!1,borderRadius:"10",scrollsToTop:!0}),scrollText=Ti.UI.createScrollView({width:180,height:95,left:10,top:u+30,borderColor:"#444444",borderWidth:1,backgroundColor:"#FFFFFF"}),labelPrecioTitulo=Ti.UI.createLabel({id:"labelPrecio",height:"auto",width:"auto",text:L("price"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",right:10,top:u+5}),labelPrecio=Ti.UI.createLabel({id:"labelPrecio",height:"auto",width:"auto",font:{fontWeight:"bold",fontSize:"24dp"},color:"#686868",right:10,top:u+20}),labelUbicacionTitulo=Ti.UI.createLabel({id:"labelUbicacionTitulo",height:"auto",width:"auto",text:L("location"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",right:10,top:u+95}),labelUbicacion=Ti.UI.createLabel({id:"labelUbicacion",height:"auto",width:"auto",font:{fontSize:"18dp"},color:"#686868",right:10,top:u+115}),labelFechaInicioTitulo=Ti.UI.createLabel({id:"labelFechaInicioTitulo",height:"auto",width:"auto",text:L("start_time"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",left:"10",top:u+180}),labelFechaInicio=Ti.UI.createLabel({id:"labelFechaInicio",height:"auto",width:"auto",font:{fontSize:"18dp"},color:"#686868",left:"20",top:u+200}),labelFechaTerminoTitulo=Ti.UI.createLabel({id:"labelFechaTerminoTitulo",height:"auto",width:"auto",text:L("end_time"),font:{fontWeight:"bold",fontSize:"20dp"},color:"black",top:u+180,right:"10"}),labelFechaTermino=Ti.UI.createLabel({id:"labelFechaTermino",height:"auto",width:"auto",font:{fontSize:"18dp"},color:"#686868",right:"10",top:u+200});var b=require("templates"),T=b.getTopBar(L("offers"),"/images/iconofertas.png",a);return viewExpositor.add(imageViewExpositor),viewExpositor.add(labelExpositor),viewExpositor.add(labelCuentaOfertas),viewExpositor.add(labelExpositorTitulo),h.add(line),h.add(labelDescripcionTitulo),h.add(labelDescripcion),h.add(labelPrecioTitulo),h.add(labelPrecio),h.add(labelUbicacionTitulo),h.add(labelUbicacion),h.add(labelFechaInicioTitulo),h.add(labelFechaInicio),h.add(labelFechaTerminoTitulo),h.add(labelFechaTermino),bottomBar.add(buttonFirst),bottomBar.add(buttonPrev),bottomBar.add(buttonNext),bottomBar.add(buttonLast),winExpW.add(T),winExpW.add(viewExpositor),winExpW.add(h),winExpW.add(bottomBar),buttonFirst.addEventListener("click",function(){r(0)}),buttonLast.addEventListener("click",function(){r(g-1)}),buttonPrev.addEventListener("click",function(){p>0?r(p-1):Ti.Media.vibrate()}),buttonNext.addEventListener("click",function(){g-1>p?r(p+1):Ti.Media.vibrate()}),winExpW.addEventListener("android:back",function(){Ti.Media.vibrate(),winExpW.close()}),winExpW}module.exports=ExpositoresWindow;